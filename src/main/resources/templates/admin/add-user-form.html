<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>&#127799 add new user! &#127799</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>

<body>

<!-- navbar -->
<nav class="navbar navbar-expand-lg navbar navbar-dark bg-dark text-white">
  <!-- logged user info -->
  <div class="container-fluid">
    <ul class="navbar-nav me-auto mb-2 mb-lg-0 align-items-center">
      <li class="nav-item">
        <p class="fs-6 d-inline" th:text="${loggedUser.username}">Email</p>
      </li>
      <li class="nav-item ms-2">
        <p class="fs-6 d-inline">with roles</p>
      </li>
      <li class="nav-item ms-2">
        <a th:each="role : ${loggedUser.roles}">
          <span th:text="${' [' + role.roleName.substring(5) + ']'}"></span>
        </a>
      </li>
    </ul>
    <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-center">
      <li class="nav-item">
        <a class="nav-link text-secondary" th:href="@{/logout}">logout</a>
      </li>
    </ul>
  </div>
</nav>

<div class="container-fluid vh-100">
  <div class="row align-items-start">
    <!-- Sidebar -->
    <div class="col-md-2 sidebar gx-0 text-center vh-100">
      <nav class="nav flex-column nav-pills h-100 mt-3">
        <!-- Sidebar navigation -->
        <ul class="nav flex-column">
          <li th:each="role : ${roles}" class="nav-item flex-grow-1">
          <!-- admin role navigation -->
          <a th:if="${role.getRoleName() == 'ROLE_ADMIN'}" class="nav-link active w-100 bg-dark" aria-current="page" th:href="@{/admin}">Admin</a>
          <!-- user role navigation -->
          <a th:if="${role.getRoleName() == 'ROLE_USER'}" class="nav-link w-100 text-secondary" th:href="@{/user}">User</a>
        </li>
        </ul>
      </nav>
    </div>
    <!-- Main content -->
    <div class="bg-light col-md-10 px-5 main-content vh-100">
      <header class="gx-5 mt-4">
        <p class="text-xl-start fs-3 lh-lg fw-light">Admin panel</p>
      </header>
      <!-- Main content -->
      <div class="gx-4">
        <!-- Tabs content -->
        <ul class="nav nav-tabs">
          <li class="nav-item">
            <a class="nav-link fw-lighter" th:href="@{/admin}">All Users</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active fw-bold" th:href="@{#add-user}" th:attr="data-bs-target=#{add-user}">New User</a>
          </li>
        </ul>

        <!-- New user tab content -->
        <div class="tab-content">
          <div class="tab-pane fade show active" id="add-user">

            <div class="border bg-dark text-white">
              <h5 class="px-3 mt-2">Add User</h5>
            </div>

            <div class="container border p-3">

              <form th:action="@{/user/add}" th:object="${user}" method="post">
                <div class="row">
                  <div class="col">
                    <label for="firstName" class="form-label">First Name</label>
                    <input type="text" class="form-control" id="firstName" name="firstName" th:field="*{firstName}" required>
                  </div>
                  <div class="col">
                    <label for="lastName" class="form-label">Last Name</label>
                    <input type="text" class="form-control" id="lastName" name="lastName" th:field="*{lastName}" required>
                  </div>
                  <div class="col-md-2">
                    <label for="age" class="form-label">Age</label>
                    <input type="number" class="form-control" id="age" name="age" th:field="*{age}">
                  </div>
                </div>
                <div class="row mt-3">
                  <div class="col">
                    <label for="email" class="form-label">Email</label>
                    <input type="text" class="form-control" id="email" placeholder="manu@mail.com" name="email" th:field="*{email}" required>
                  </div>
                  <div class="col">
                    <label for="password" class="form-label">Password</label>
                    <input type="password" class="form-control" id="password" name="password" th:field="*{password}" required>
                  </div>
                </div>
                <div class="row mt-3 mb-3">
                  <label for="roles" class="form-label">Role</label>
                  <select id="roles" class="form-select" multiple aria-label="multiple select example" name="selectedRoles" data-bs-select="true">
                    <option th:each="role : ${roles}" th:value="${role.idRole}" th:text="${role.roleName.substring(5)}"></option>
                  </select>
                </div>
                <div class="d-grid gap-2 col-6 mx-auto">
                  <button class="btn btn-dark" type="submit">&#127799 save new user! &#127799</button>
                </div>
              </form>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

</body>
</html>